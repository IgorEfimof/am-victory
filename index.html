<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Анализ Кф. с силой геймов</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .strength-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }
        .strength-table th, .strength-table td {
            padding: 8px;
            text-align: center;
            border: 1px solid #444;
        }
        .strength-table th {
            background-color: #333;
            color: white;
        }
        .strength-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .strength-table tr:nth-child(odd) {
            background-color: #ddd;
        }
        .deviation-positive {
            color: #2ecc71;
            font-weight: bold;
        }
        .deviation-negative {
            color: #e74c3c;
            font-weight: bold;
        }
        .game-strength-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="summary-card">
            <label class="toggle-switch">
                <input type="checkbox" id="aiToggle" checked>
                <span class="slider round"></span>
                AI анализ
            </label>
            <p class="avg-p green">Кф1: <span id="averagePlayer1">0.00</span></p>
            <p class="avg-p green">Кф2: <span id="averagePlayer2">0.00</span></p>
            <p class="winner-p blue">Победитель: Игрок <span id="winner">-</span></p>
            <div class="prediction-box">
                <p id="totalPrediction" class="prediction-text green"></p>
            </div>
            <p class="points-p white">Мин. очки: <span id="smallestPlayerPoints">0.00</span></p>
            <p id="aiAnalysis" class="ai-analysis-text yellow"></p>
        </div>

        <h3 class="input-title">Коэфф. (5-10 гейм)</h3>

        <div class="input-grid">
            <!-- Динамически генерируемые поля ввода -->
        </div>

        <button id="clearButton" class="clear-button">Очистить</button>

        <!-- Новый раздел для анализа силы геймов -->
        <div class="game-strength-section">
            <h3>Анализ силы геймов</h3>
            <table class="strength-table" id="strengthTable">
                <thead>
                    <tr>
                        <th>Гейм</th>
                        <th>Сила Игрока 1</th>
                        <th>Сила Игрока 2</th>
                        <th>Отклонение</th>
                        <th>Тенденция</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Данные будут заполняться через JavaScript -->
                </tbody>
            </table>
            <div id="gameStrengthInsights" class="insights-box"></div>
        </div>

        <!-- График силы геймов (опционально) -->
        <div class="game-strength-section">
            <h3>Динамика силы по геймам</h3>
            <canvas id="strengthChart" width="400" height="200"></canvas>
        </div>
    </div>

    <div id="virtualKeyboard" class="virtual-keyboard hidden">
        <div class="keyboard-row">
            <button class="key" data-value="1">1</button>
            <button class="key" data-value="2">2</button>
            <button class="key" data-value="3">3</button>
        </div>
        <div class="keyboard-row">
            <button class="key" data-value="4">4</button>
            <button class="key" data-value="5">5</button>
            <button class="key" data-value="6">6</button>
        </div>
        <div class="keyboard-row">
            <button class="key" data-value="7">7</button>
            <button class="key" data-value="8">8</button>
            <button class="key" data-value="9">9</button>
        </div>
        <div class="keyboard-row">
            <button class="key" data-value=".">.</button>
            <button class="key" data-value="0">0</button>
            <button class="key" data-value="backspace">⌫</button>
        </div>
        <div class="keyboard-row">
            <button class="key-done" data-value="done">Готово</button>
        </div>
    </div>

    <!-- Подключаем Chart.js для графиков -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    
    <script>
        // Инициализация графика (добавьте в ваш script.js)
        let strengthChart = null;
        
        function initStrengthChart() {
            const ctx = document.getElementById('strengthChart').getContext('2d');
            strengthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Гейм 5', 'Гейм 6', 'Гейм 7', 'Гейм 8', 'Гейм 9', 'Гейм 10'],
                    datasets: [
                        {
                            label: 'Сила Игрока 1',
                            data: [],
                            borderColor: 'rgb(75, 192, 192)',
                            tension: 0.1,
                            fill: false
                        },
                        {
                            label: 'Сила Игрока 2',
                            data: [],
                            borderColor: 'rgb(255, 99, 132)',
                            tension: 0.1,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Сила гейма'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Номер гейма'
                            }
                        }
                    }
                }
            });
        }
        
        // Вызываем инициализацию при загрузке
        document.addEventListener('DOMContentLoaded', initStrengthChart);
    </script>
</body>
</html>
